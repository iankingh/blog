<!doctype html><html lang=zh-tw data-theme=light><head><meta charset=utf-8><meta name=viewport content="width=device-width"><meta name=theme-color content="#222" media="(prefers-color-scheme: light)"><meta name=generator content="Hugo 0.109.0"><link rel="shortcut icon" type=image/x-icon href=/blog/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/blog/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/blog/imgs/icons/favicon_16x16_next.png><link rel=icon type=image/png sizes=32x32 href=/blog/imgs/icons/favicon_32_32_next.png><link rel=apple-touch-icon sizes=180x180 href=/blog/imgs/icons/apple_touch_icon_next.png><meta itemprop=name content="SpringDataJpaNotes"><meta itemprop=description content="保持简单的易用性和强大的功能。"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="https://iankingh.github.io/blog/imgs/author.jpg"><meta itemprop=keywords content="java,Spring,Spring Data JPA"><meta property="og:type" content="article"><meta property="og:title" content="SpringDataJpaNotes"><meta property="og:description" content="保持简单的易用性和强大的功能。"><meta property="og:image" content="/blog/imgs/author.jpg"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="https://iankingh.github.io/blog/post/spring/spring-data-jpa-notes/"><meta property="og:site_name" content="ianhuang筆記"><meta property="og:locale" content="zh-TW"><meta property="article:author" content="NexT 主题"><meta property="article:published_time" content="2020-06-04 05:45:59 +0800 CST"><meta property="article:modified_time" content="2020-06-04 05:45:59 +0800 CST"><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/font-awesome/6.1.2/css/all.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/animate.css/3.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.css><link rel=stylesheet href=/blog/css/main.min.6909b3960a51fc23c64b3e68e6bf34ffc07c11099f0ebf7870a01c8b934a3330.css><style type=text/css>.post-footer,.flinks-list-footer hr:after{content:"~ 我可是有底线的哟 ~"}</style><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return void 0;const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),void 0):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script class=next-config data-name=page type=application/json>{"comments":false,"isHome":false,"isPage":true,"path":"spring-data-jpa-notes","permalink":"https://iankingh.github.io/blog/post/spring/spring-data-jpa-notes/","title":"SpringDataJpaNotes","waline":{"js":[{"alias":"waline","alias_name":"@waline/client","file":"dist/pageview.js","name":"pageview","version":"2.13.0"},{"alias":"waline","alias_name":"@waline/client","file":"dist/comment.js","name":"comment","version":"2.13.0"}]}}</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://www.googletagmanager.com/gtag/js?id=G-WF6NBSJFE5",e.async="true",e.onload=function(){window.dataLayer=window.dataLayer||[];function e(){dataLayer.push(arguments)}e("js",new Date),e("config","G-WF6NBSJFE5 ")},document.head.appendChild(e)})</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><title>SpringDataJpaNotes - ianhuang筆記</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label=切換導航欄 role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>ianhuang筆記</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>為 Hugo 打造的主题</p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/blog/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>首頁</a></li><li class="menu-item menu-item-code"><a href=/blog/categories/%E6%8A%80%E8%A1%93/ class=hvr-icon-pulse rel=section><i class="fa fa-code hvr-icon"></i>技術</a></li><li class="menu-item menu-item-book"><a href=/blog/categories/%E7%AD%86%E8%A8%98/ class=hvr-icon-pulse rel=section><i class="fa fa-book hvr-icon"></i>筆記</a></li><li class="menu-item menu-item-archives"><a href=/blog/post/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>歸檔
<span class=badge>59</span></a></li><li class="menu-item menu-item-about"><a href=/blog/about/ class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>關於</a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>搜索</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=搜索... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目錄</li><li class=sidebar-nav-overview>站點概覽</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><a href=#spring-data-jpa-介紹>Spring Data JPA 介紹</a><ul><li><a href=#spring-data-概述>Spring-Data 概述</a></li><li><a href=#spring-data-jpa-概述>Spring Data JPA 概述</a></li></ul></li><li><a href=#repository>Repository</a><ul><li><a href=#repository介面>Repository介面</a></li><li><a href=#crudrepository-介面>CrudRepository 介面</a></li><li><a href=#pagingandsortingrepository-介面>PagingAndSortingRepository 介面</a></li><li><a href=#jparepository-介面>JpaRepository 介面</a></li><li><a href=#jpaspecificationexecutor介面>JpaSpecificationExecutor介面</a></li></ul></li><li><a href=#spring-data-方法定義規範>Spring-Data 方法定義規範</a><ul><li><a href=#擴展查詢>擴展查詢</a></li><li><a href=#query注解>@Query注解</a></li><li><a href=#query來指定本地查詢>@Query來指定本地查詢</a></li></ul></li><li><a href=#參考>參考</a></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt="NexT 主题" src=/blog/imgs/img-lazy-loading.gif data-src=/blog/imgs/author.jpg><p class=site-author-name itemprop=name>NexT 主题</p><div class=site-description itemprop=description>保持简单的易用性和强大的功能。</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>59</span>
<span class=site-state-item-name>日誌</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>5</span>
<span class=site-state-item-name>分類</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>40</span>
<span class=site-state-item-name>標籤</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/iankingh title="Github → https://github.com/iankingh" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-github fa-fw hvr-icon"></i>Github</a></span></div><div class="cc-license animated" itemprop=license><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh class=cc-opacity rel=noopener target=_blank title=共享知識><img src=/blog/imgs/img-lazy-loading.gif data-src=/blog/imgs/cc/big/by_nc_sa.svg alt=共享知識></a></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i>友情链接</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=https://gitee.com/hugo-next/hugo-theme-next title=https://gitee.com/hugo-next/hugo-theme-next target=_blank>Hugo-NexT</a></li><li class=links-of-blogroll-item><a href=https://lisenhui.cn title=https://lisenhui.cn target=_blank>凡梦星尘空间站</a></li></ul></div></div></div></div><div id=siteinfo-card-widget class=sidebar-card-widget><div class=item-headline><i class="fas fa-chart-line"></i>
<span>網站資訊</span></div><div class=siteinfo><div class=siteinfo-item><div class=item-name><i class="fa-solid fa-calendar-check"></i>已運行：</div><div class=item-count id=runTimes data-publishdate=2020-04-21T22:29:36+08:00></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-user"></i>總訪客數：</div><div class=item-count id=busuanzi_value_site_uv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-eye"></i>頁面瀏覽：</div><div class=item-count id=busuanzi_value_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-font"></i>總字數：</div><div class=item-count id=wordsCount data-count=54746></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-mug-hot"></i>閱讀約：</div><div class=item-count id=readTimes data-times=143></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-clock-rotate-left"></i>最後更新於：</div><div class=item-count id=last-push-date data-lastpushdate=2022-02-23T18:13:27+08:00></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=goto-gtranslate class=button title=多語言翻譯><i class="fas fa-globe"></i></div><div id=toggle-theme class=button title=深淺模式切換><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回頂部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a>
<a href=https://github.com/iankingh rel="noopener external nofollow noreferrer" target=_blank title="Follow me on GitHub" class="exturl github-corner"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><script type=text/javascript src=//sidecar.gitter.im/dist/sidecar.v1.js async></script>
<script type=text/javascript>((window.gitter={}).chat={}).options={room:"hugo-next/community"}</script><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://iankingh.github.io/blog/post/spring/spring-data-jpa-notes/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image src=/blog/imgs/author.jpg><meta itemprop=name content="NexT 主题"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="NexT 主题"><meta itemprop=description content="保持简单的易用性和强大的功能。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="SpringDataJpaNotes"><meta itemprop=description content="Spring Data JPA 介紹

Spring-Data 概述
Spring Data 是一個資料訪問框架 ，用於簡化資料庫訪問，旨在提供一致的資料庫訪問模型，同時仍然保留不同資料庫底層資料存儲的特點，Spring Data 採用了領域驅動模型的設計思想，實現了訪問關係型數據庫、非關係型數據庫的統一的介面，只需要定義好領域模型（Entity），後續的創建表、CURD、排序操作不需要手動添加任何SQL語句，同時也支持手動擴展功能。
Spring Data 只要定義介面，遵循 Spring Data 的規範，就無需寫實現類。
Spring Data 提供了預設的交易處理方式，即所有的查詢均聲明為唯讀事務。
Spring Data 專案所支援 NoSQL 存儲：MongoDB （文檔資料庫）、Neo4j（圖形資料庫）、Redis（鍵/值存儲）、Hbase（列族資料庫）
Spring Data 專案所支援的關係資料存儲技術：JDBC、JPA"></span><header class=post-header><h1 class=post-title itemprop="name headline">SpringDataJpaNotes
<a href=https://github.com/user-name/repo-name/tree/branch-name/subdirectory-name/post/spring/spring-data-Jpa-Notes.md rel="noopener external nofollow noreferrer" target=_blank class="exturl post-edit-link" title=編輯><i class="fa fa-pen-nib"></i></a></h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i></span>
<span class=post-meta-item-text>發表於：</span>
<time title="發表於：2020-06-04 05:45:59 +0800 CST" itemprop="dateCreated datePublished" datetime="2020-06-04 05:45:59 +0800 CST">2020-06-04</time></span>
<span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-folder-open"></i></span>
<span class=post-meta-item-text>分類於：</span>
<span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/%E7%AD%86%E8%A8%98 itemprop=url rel=index><span itemprop=name>筆記</span></a></span></span></div><div class=post-meta-items><span class=post-meta-item title=字數><span class=post-meta-item-icon><i class="far fa-file-word"></i></span>
<span class=post-meta-item-text>字數：</span><span>4815</span></span>
<span class=post-meta-item title=閱讀><span class=post-meta-item-icon><i class="far fa-clock"></i></span>
<span class=post-meta-item-text>閱讀：&ap;</span>
<span>10分鐘</span></span>
<span class=post-meta-item title=瀏覽><span class=post-meta-item-icon><i class="far fa-eye"></i></span>
<span class=post-meta-item-text>瀏覽：</span>
<span id=busuanzi_value_page_pv class=waline-pageview-count data-path=/blog/post/spring/spring-data-jpa-notes/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class="post-body autonumber" itemprop=articleBody><h2 id=spring-data-jpa-介紹>Spring Data JPA 介紹</h2><h3 id=spring-data-概述>Spring-Data 概述</h3><p><strong>Spring Data</strong> 是一個資料訪問框架 ，用於簡化資料庫訪問，旨在提供一致的資料庫訪問模型，同時仍然保留不同資料庫底層資料存儲的特點，<strong>Spring</strong> <strong>Data</strong> 採用了<strong>領域驅動模型</strong>的設計思想，實現了訪問關係型數據庫、非關係型數據庫的統一的介面，只需要定義好領域模型（<strong>Entity</strong>），後續的創建表、<strong>CURD</strong>、排序操作不需要手動添加任何<strong>SQL</strong>語句，同時也支持手動擴展功能。</p><p><strong>Spring Data</strong> 只要定義介面，遵循 <strong>Spring Data</strong> 的規範，就無需寫實現類。</p><p><strong>Spring Data</strong> 提供了預設的交易處理方式，即所有的查詢均聲明為唯讀事務。</p><p><strong>Spring Data</strong> 專案所支援 <strong>NoSQL</strong> 存儲：<strong>MongoDB</strong> （文檔資料庫）、<strong>Neo4j</strong>（圖形資料庫）、Redis（<strong>鍵</strong>/值存儲）、<strong>Hbase</strong>（列族資料庫）</p><p><strong>Spring Data</strong> 專案所支援的關係資料存儲技術：<strong>JDBC、JPA</strong></p><h3 id=spring-data-jpa-概述>Spring Data JPA 概述</h3><p>JPA(Java Persistence API)是 <strong>Sun</strong> 官方提出的 <strong>Java</strong> 持久化規範。</p><p><strong>JPA</strong>主要是為了簡化現有的持久化開發工作和整合 <strong>ORM</strong> 技術， 是在充分吸收了現有 <strong>Hibernate、TopLink、JDO</strong> 等 <strong>ORM</strong> 框架的基礎上發展而來的，具有易於使用、伸縮性強等優點。</p><p><strong>Spring Data JPA</strong> 是 <strong>Spring</strong> 基於 <strong>ORM</strong> 框架、<strong>JPA</strong> 規範的基礎上封裝的一套 <strong>JPA</strong> 應用框架，可使開發者用簡單代碼即可實現對資料的訪問和操作。</p><p>它提供了包括增刪改查等在內的常用功能，且易於擴展！通常我們寫持久層，都是先寫一個介面，再寫介面對應的實現類，在實現類中進行持久層的業務邏輯處理。而現在，<strong>Spring Data JPA</strong>幫助我們自動完成了持久層的業務邏輯處理，開發者唯一要做的，就只是聲明持久層的介面，其他都交給 <strong>Spring Data JPA</strong> 來幫你完成！</p><p><code>注意：JPA 是一套規範，不是一套產品， Hibernate、TopLink、JDO 它們是一套產品，如果說這些產品實現了這個 JPA 規範，那麼就可以叫它們為 JPA 的實現產品。</code></p><h2 id=repository>Repository</h2><h3 id=repository介面>Repository介面</h3><p><strong>Repository</strong> 介面是 <strong>Spring Data</strong> 的一個核心介面，是一個抽象的介面，使用者通過繼承該介面來實現資料的訪問，它不提供任何方法，開發者需要在自己定義的介面中聲明需要的方法</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>Repository</span><span style=color:#f92672>&lt;</span>T<span style=color:#f92672>,</span> ID<span style=color:#f92672>&gt;</span> <span style=color:#f92672>{</span> <span style=color:#f92672>}</span>
</span></span></code></pre></div><p>很重要的一點就是，<strong>Repository</strong>的實現類是在應用啟動的時候生成的，也就是<strong>Spring</strong>的應用上下文創建的時候.而不是通過代碼生成技術產生的，也不是介面方法調用時才產生的 基礎的<strong>Repository</strong>提供了最基本的資料訪問功能，其幾個子介面則擴展了一些功能。</p><p>編寫<strong>Spring Data JPA Repository</strong> 的關鍵在於從一組介面中挑選一個進行擴展</p><p>EX:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>CustomerRepository</span> <span style=color:#66d9ef>extends</span> Repository<span style=color:#f92672>&lt;</span>CustomerEntity<span style=color:#f92672>,</span>Long<span style=color:#f92672>&gt;</span> <span style=color:#f92672>{</span> <span style=color:#f92672>}</span>
</span></span></code></pre></div><p>添加注解為其指定 <strong>CustomerEntity</strong>和 <strong>id</strong> 屬性。</p><p><code>在spring boot中如果使用了 spring-boot-starter-data-jpa ,會自動掃描所有擴展了Repository介面的類</code></p><h3 id=crudrepository-介面>CrudRepository 介面</h3><p><strong>CrudRepository</strong> 介面繼承<strong>Repository</strong>，提供對實體類(<strong>CRUD</strong>)增刪改查方法，可以直接調用。</p><p><strong>CrudRepository</strong>介面實現了<strong>save、delete、count、exists</strong>等方法，繼承這個介面時需要兩個範本參數<strong>T</strong>和<strong>ID</strong>，<strong>T</strong>就是你的實體類（對應資料庫表），<strong>ID</strong>就是主鍵。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>CrudRepository</span><span style=color:#f92672>&lt;</span>T<span style=color:#f92672>,</span> ID <span style=color:#66d9ef>extends</span> Serializable<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>extends</span> Repository<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>,</span> ID<span style=color:#f92672>&gt;</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span>S <span style=color:#66d9ef>extends</span> T<span style=color:#f92672>&gt;</span> S <span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>S entity<span style=color:#f92672>);</span> <span style=color:#75715e>//Saves the given entity (保存給定的實體。)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    Optional<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>findById</span><span style=color:#f92672>(</span>ID primaryKey<span style=color:#f92672>);</span> <span style=color:#75715e>//Returns the entity identified by the given ID.(返回由給定ID標識的實體。)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    Iterable<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>findAll</span><span style=color:#f92672>();</span> <span style=color:#75715e>//Returns all entities.(返回所有實體。)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>long</span> <span style=color:#a6e22e>count</span><span style=color:#f92672>();</span><span style=color:#75715e>//Returns the number of entities.(查詢實體數量) 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>delete</span><span style=color:#f92672>(</span>T entity<span style=color:#f92672>);</span> <span style=color:#75715e>//	Deletes the given entity.(刪除給定的實體。)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>existsById</span><span style=color:#f92672>(</span>ID primaryKey<span style=color:#f92672>);</span> <span style=color:#75715e>//Indicates whether an entity with the given ID exists.(根據id判斷實體是否存在)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>delete</span><span style=color:#f92672>(</span>ID id<span style=color:#f92672>);</span><span style=color:#75715e>//根據Id刪除實體 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>   
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;</span>S <span style=color:#66d9ef>extends</span> T<span style=color:#f92672>&gt;</span> Iterable<span style=color:#f92672>&lt;</span>S<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>saveAll</span><span style=color:#f92672>(</span>Iterable<span style=color:#f92672>&lt;</span>S<span style=color:#f92672>&gt;</span> entities<span style=color:#f92672>);</span><span style=color:#75715e>//保存集合
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>在使用中，使用者需要繼承這個介面，<strong>CustomerEntity</strong>就是定義的實體，<strong>Long</strong>是主鍵類型</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>CustomerRepository</span> <span style=color:#66d9ef>extends</span> CrudRepository<span style=color:#f92672>&lt;</span>CustomerEntity<span style=color:#f92672>,</span> Long<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>package</span> com.example.demo<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.ArrayList<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.junit.jupiter.api.Test<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.beans.factory.annotation.Autowired<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.boot.test.context.SpringBootTest<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * CustomerRepositoryTest
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@SpringBootTest</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>CustomerRepositoryTest</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Autowired</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> UserRepository userRepository<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// CRUD 操作
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 增 save(entity), save(entities)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>save1</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        UserEntity userEntity <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> UserEntity<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        userEntity<span style=color:#f92672>.</span><span style=color:#a6e22e>setName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;肯德基20&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        userEntity <span style=color:#f92672>=</span> userRepository<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>userEntity<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>userEntity<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// save(entities)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>saveManyTest</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        UserEntity userEntity <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> UserEntity<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        userEntity<span style=color:#f92672>.</span><span style=color:#a6e22e>setName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;test21&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        UserEntity userEntity2 <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> UserEntity<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        userEntity2<span style=color:#f92672>.</span><span style=color:#a6e22e>setName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;test22&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        ArrayList<span style=color:#f92672>&lt;</span>UserEntity<span style=color:#f92672>&gt;</span> userEntities <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;</span>UserEntity<span style=color:#f92672>&gt;();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        userEntities<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span>userEntity<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        userEntities<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span>userEntity2<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        userRepository<span style=color:#f92672>.</span><span style=color:#a6e22e>saveAll</span><span style=color:#f92672>(</span>userEntities<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span>    <span style=color:#75715e>// 刪 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    delete<span style=color:#f92672>(</span>id<span style=color:#f92672>),</span>delete<span style=color:#f92672>(</span>entity<span style=color:#f92672>),</span>delete<span style=color:#f92672>(</span>entities<span style=color:#f92672>),</span>deleteAll
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 查 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    findOne<span style=color:#f92672>(</span>id<span style=color:#f92672>),</span>findAll<span style=color:#f92672>,</span>exits<span style=color:#f92672>(</span>id<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e>// save***只要 id一樣,就會更新,而不是添加.
</span></span></span></code></pre></div><h3 id=pagingandsortingrepository-介面>PagingAndSortingRepository 介面</h3><p>繼承<strong>CrudRepository</strong>，具有分頁查詢和排序功能</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>PagingAndSortingRepository</span><span style=color:#f92672>&lt;</span>T<span style=color:#f92672>,</span> ID <span style=color:#66d9ef>extends</span> Serializable<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>extends</span> CrudRepository<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>,</span> ID<span style=color:#f92672>&gt;</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>  Iterable<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>findAll</span><span style=color:#f92672>(</span>Sort sort<span style=color:#f92672>);</span> <span style=color:#75715e>//排序
</span></span></span><span style=display:flex><span><span style=color:#75715e></span> 
</span></span><span style=display:flex><span>  Page<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>findAll</span><span style=color:#f92672>(</span>Pageable pageable<span style=color:#f92672>);</span> <span style=color:#75715e>//分頁查詢（含排序功能）
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>**example: **</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> com.example.demo<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.ArrayList<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.junit.jupiter.api.Test<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.beans.factory.annotation.Autowired<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.boot.test.context.SpringBootTest<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * CustomerRepositoryTest
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@SpringBootTest</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>CustomerRepositoryTest</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Autowired</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> CustomerRepository customerRepository<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>findAll</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        Iterable iterable <span style=color:#f92672>=</span> customerRepository<span style=color:#f92672>.</span><span style=color:#a6e22e>findAll</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;iterable &#34;</span> <span style=color:#f92672>+</span> iterable<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h3 id=jparepository-介面>JpaRepository 介面</h3><p>繼承 <strong>PagingAndSortingRepository</strong>，實現一組 <strong>JPA</strong> 規範相關的方法，
該介面提供了<strong>JPA</strong>的相關功能 ，<strong>PagingAndSortingRepository</strong>介面本身已經繼承了 <strong>CrudRepository</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>JpaRepository</span><span style=color:#f92672>&lt;</span>T<span style=color:#f92672>,</span>ID<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>extends</span> PagingAndSortingRepository<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>,</span>ID<span style=color:#f92672>&gt;,</span> QueryByExampleExecutor<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>	List<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>findAll</span><span style=color:#f92672>();</span> <span style=color:#75715e>//查找所有實體
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    
</span></span><span style=display:flex><span>	List<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>findAll</span><span style=color:#f92672>(</span>Sort sort<span style=color:#f92672>);</span> <span style=color:#75715e>//排序、查找所有實體
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    
</span></span><span style=display:flex><span>	List<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>Iterable<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>extends</span> T<span style=color:#f92672>&gt;</span> entities<span style=color:#f92672>);</span><span style=color:#75715e>//保存集合
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    
</span></span><span style=display:flex><span>	T <span style=color:#a6e22e>saveAndFlush</span><span style=color:#f92672>(</span>T entity<span style=color:#f92672>);</span><span style=color:#75715e>//強制執行持久化
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>flush</span><span style=color:#f92672>();</span><span style=color:#75715e>//執行緩存與資料庫同步
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>void</span> <span style=color:#a6e22e>deleteInBatch</span><span style=color:#f92672>(</span>Iterable<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> entities<span style=color:#f92672>);</span><span style=color:#75715e>//刪除一個實體集合
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h3 id=jpaspecificationexecutor介面>JpaSpecificationExecutor介面</h3><p>可以執行原生SQL查詢也可以自訂<strong>Repository</strong>的方法不屬於Repository體系，實現一組 JPA <strong>Criteria</strong> 查詢相關的方法 <strong>Specification</strong>：封裝 <strong>JPA Criteria</strong> 查詢準則。通常使用匿名內部類的方式來創建該介面的物件</p><p><strong>Specification</strong>：封裝 <strong>JPA Criteria</strong> 查詢準則。通常使用匿名內部類的方式來創建該介面的物件</p><p>由於<strong>JpaSpecificationExecutor</strong> 並不繼承<strong>repository</strong> 介面，所以它不能單獨使用，只能和<strong>jpa Repository</strong> 一起用。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>JpaSpecificationExecutor</span><span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    T <span style=color:#a6e22e>findOne</span><span style=color:#f92672>(</span>Specification<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> spec<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    List<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>findAll</span><span style=color:#f92672>(</span>Specification<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> spec<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Page<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>findAll</span><span style=color:#f92672>(</span>Specification<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> spec<span style=color:#f92672>,</span> Pageable pageable<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    List<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>findAll</span><span style=color:#f92672>(</span>Specification<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> spec<span style=color:#f92672>,</span> Sort sort<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>long</span> <span style=color:#a6e22e>count</span><span style=color:#f92672>(</span>Specification<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> spec<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span> <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>CustomerRepository</span> <span style=color:#66d9ef>extends</span> CrudRepository<span style=color:#f92672>&lt;</span>Customer<span style=color:#f92672>,</span> Long<span style=color:#f92672>&gt;,</span>  JpaSpecificationExecutor <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span> <span style=color:#f92672>}</span>
</span></span></code></pre></div><h2 id=spring-data-方法定義規範>Spring-Data 方法定義規範</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>ProductInfoRepository</span> <span style=color:#66d9ef>extends</span> JpaRepository<span style=color:#f92672>&lt;</span>ProductInfoEntity<span style=color:#f92672>,</span>String<span style=color:#f92672>&gt;</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>   <span style=color:#75715e>//定義一個方法:根據商品名稱查找所有的商品
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  List<span style=color:#f92672>&lt;</span>ProductInfoEntity<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>findAllByProductName</span><span style=color:#f92672>(</span>String name<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>當創建 <strong>Repository</strong> 實現的時候， <strong>Spring Data</strong>會檢查 <strong>Repository</strong> 介面的所有方法，解析方法的名稱，並基於被持久化的物件來推測方法的目的，<strong>Spring Data</strong> 定義了一組小型的領域特定語言(<strong>DSL</strong>) ，在這裡持久化的細節都是通過 <strong>Repository</strong>的方法簽名來描述的</p><p><strong>findAllByProductName(String name)</strong> 方法非常簡單，<strong>Repoditory</strong> 方法是 由一個動詞，一個可選主題,關鍵字<strong>By</strong>以及一個斷言所組成</p><p>在<strong>findAllByProductName</strong> 方法中,動詞是<strong>findAll</strong> ,斷言是 <strong>ProductName</strong>，主題並沒有指定，</p><p>暗含就是 <strong>ProductInfoEntity Repository</strong> 方法的主題是可選的,它主要是讓你命名方法的時候有很多的靈活性,findAllByProductName和findAllProductInfoEntityByProductName方法沒有什麼區別. 要查詢的物件的類型是通過如何參數化 Repository 介面來決定的,而不是方法名稱中的主題.</p><h3 id=擴展查詢>擴展查詢</h3><p>按照Spring Data 的規範，查詢方法以find | read | get 開頭， 涉及條件查詢時，條件的屬性用條件關鍵字連接，要注意的是：條件屬性以首字母大寫。</p><p>find | read | get方法都會查詢資料並返回物件.而 count 則會返回匹配對象的數量,而不是對象本身.</p><p>EX：定義一個 Entity 實體類</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>UserEntity</span><span style=color:#960050;background-color:#1e0010>｛</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  	<span style=color:#66d9ef>private</span> String  firstName<span style=color:#f92672>;</span> 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String lastName<span style=color:#f92672>;</span> 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>｝</span>
</span></span></code></pre></div><p>使用And條件連接時，應這樣寫：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span>findByLastNameAndFirstName<span style=color:#f92672>(</span>String lastName<span style=color:#f92672>,</span>String firstName<span style=color:#f92672>);</span>
</span></span></code></pre></div><p>假如創建如下的查詢：findByUserDepUuid()，框架在解析該方法時，首先剔除 findBy，然後對剩下的屬性進行解析，假設查詢實體為Doc
（1）先判斷 userDepUuid （根據 POJO 規範，首字母變為小寫）是否為查詢實體的一個屬性，如果是，則表示根據該屬性進行查詢；如果沒有該屬性，繼續第二步；
（2）從右往左截取第一個大寫字母開頭的字串(此處為Uuid)，然後檢查剩下的字串是否為查詢實體的一個屬性，如果是，則表示根據該屬性進行查詢；如果沒有該屬性，則重複第二步，繼續從右往左截取；最後假設 user 為查詢實體的一個屬性；
（3）接著處理剩下部分（DepUuid），先判斷 user 所對應的類型是否有depUuid屬性，如果有，則表示該方法最終是根據 “ Doc.user.depUuid” 的取值進行查詢；否則繼續按照步驟 2 的規則從右往左截取，最終表示根據 “Doc.user.dep.uuid” 的值進行查詢。
（4）可能會存在一種特殊情況，比如 Doc包含一個 user 的屬性，也有一個 userDep 屬性，此時會存在混淆。可以明確在屬性之間加上 &ldquo;_&rdquo; 以顯式表達意圖，比如 &ldquo;findByUser_DepUuid()&rdquo; 或者 &ldquo;findByUserDep_uuid()&rdquo;
特殊的參數： 還可以直接在方法的參數上加入分頁或排序的參數，比如：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span> Page<span style=color:#f92672>&lt;</span>UserModel<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>findByName</span><span style=color:#f92672>(</span>String name<span style=color:#f92672>,</span> Pageable pageable<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span> List<span style=color:#f92672>&lt;</span>UserModel<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>findByName</span><span style=color:#f92672>(</span>String name<span style=color:#f92672>,</span> Sort sort<span style=color:#f92672>);</span>
</span></span></code></pre></div><p>如果覺得curdrepository提供的查詢不符合要求，可以繼承該介面進行擴展，</p><p>Spring Data JPA為此提供了一些表達條件查詢的關鍵字，大致如下：</p><p>條件的屬性名稱與個數要與參數的位置與個數一一對應
直接在介面中定義查詢方法，如果是符合規範的，可以不用寫實現，目前支援的關鍵字寫法如下：</p><table><thead><tr><th><strong>Keyword</strong></th><th>Description</th><th><strong>Sample</strong></th></tr></thead><tbody><tr><td>And</td><td>等價於SQL中的and 關鍵字</td><td>findByUsernameAndPassword(String user, Striang pwd)；</td></tr><tr><td>Or</td><td>等價於SQL中的or 關鍵字</td><td>findByUsernameOrAddress(String user, String addr);</td></tr><tr><td>Between</td><td>等價於SQL中的between 關鍵字</td><td>findBySalaryBetween(int max,int min)；</td></tr><tr><td>LessThan</td><td>等價於SQL中的"&lt;"</td><td>findBySalaryLessThan(int max)；</td></tr><tr><td>GreaterThan</td><td>等價於SQL中的">"</td><td>findBySalaryGreaterThan(intmin)；</td></tr><tr><td>IsNull</td><td>等價於SQL中的"is null"</td><td>findByUsernameIsNull()；</td></tr><tr><td>IsNotNull</td><td>等價於SQL中的"is not null"</td><td>findByUsernameIsNotNull()；</td></tr><tr><td>NotNull</td><td>與IsNotNull等價</td><td></td></tr><tr><td>Like</td><td>等價於SQL中的"like"</td><td>findByUsernameLike(String user)；</td></tr><tr><td>NotLike</td><td>等價於SQL中的"not like"</td><td>findByUsernameNotLike(Stringuser)；</td></tr><tr><td>OrderBy</td><td>等價於SQL中的"order by"</td><td>findByUsernameOrderBySalaryAsc(String user)；</td></tr><tr><td>Not</td><td>等價於SQL中的"！ ="</td><td>findByUsernameNot(String user)；</td></tr><tr><td>In</td><td>等價於SQL中的"in"</td><td>findByUsernameIn(Collection<string> userList)，方法的參數可以是 Collection類型，也可以是陣列或者不定長參數；</td></tr><tr><td>NotIn</td><td>等價於SQL中的"not in"</td><td>findByUsernameNotIn(Collection<string> userList)，方法的參數可以是 Collection類型，也可以是陣列或者不定長參數；</td></tr></tbody></table><h3 id=query注解>@Query注解</h3><p><strong>Spring Data</strong> 這個小型的DSL<strong>依舊有其局限性</strong>,有時候通過方法名表達預期的查詢很繁瑣,甚至無法實現.如果與呆這種情況,<strong>Spring Data</strong>能讓我們通過**@Query**注解來解決問題</p><p>這種查詢可以聲明在 <strong>Repository</strong> 方法中，擺脫像命名查詢那樣的約束，將查詢直接在相應的介面方法中聲明，結構更為清晰，這是 <strong>Spring data</strong> 的特有實現。</p><p>如果是 <strong>@Query</strong> 中有 <strong>LIKE</strong> 關鍵字，後面的參數需要前面或者後面加 <strong>%</strong>，這樣在傳遞參數值的時候就可以不加 <strong>%</strong>：</p><p><strong>@Query</strong>注解
這種查詢可以聲明在 <strong>Repository</strong> 方法中，擺脫像命名查詢那樣的約束，將查詢直接在相應的介面方法中聲明，結構更為清晰，這是 <strong>Spring data</strong> 的特有實現。</p><p>自訂 <strong>Repository</strong> 方法
定義一個介面: 聲明要添加的, 並自實現的方法
提供該介面的實現類: 類名需在要聲明的 <strong>Repository</strong> 後添加 <strong>Impl</strong>, 並實現方法
聲明 <strong>Repository</strong> 介面, 並繼承 1) 聲明的介面
使用.
注意: 預設情況下, <strong>Spring Data</strong> 會在 <strong>base-package</strong> 中查找 &ldquo;介面名<strong>Impl</strong>&rdquo; 作為實現類. 也可以通過　<strong>repository-impl-postfix</strong>　聲明尾碼</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Query</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;select o from UserModel o where o.name like %?1&#34;</span><span style=color:#f92672>)</span>
</span></span></code></pre></div><h3 id=query來指定本地查詢>@Query來指定本地查詢</h3><p>使用**@Query<strong>來指定本地查詢，只要設置</strong>nativeQuery<strong>為</strong>true**</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Query</span><span style=color:#f92672>(</span>value<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;select * from tbl_user where name like %?1&#34;</span> <span style=color:#f92672>,</span>nativeQuery<span style=color:#f92672>=</span><span style=color:#66d9ef>true</span><span style=color:#f92672>)</span>
</span></span></code></pre></div><p><strong>@Query</strong> 與 <strong>@Modifying</strong> 這兩個 <strong>annotation</strong>一起聲明，可定義個性化更新操作，例如只涉及某些欄位更新時最為常用</p><p><strong>Springdata</strong>支援<strong>JPQL</strong> 語句對查詢進行擴展，</p><p>例子如下：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span>  <span style=color:#a6e22e>CustomerRepository</span> <span style=color:#66d9ef>extends</span>  CrudRepository<span style=color:#f92672>&lt;</span>Customer<span style=color:#f92672>,</span>  Long<span style=color:#f92672>&gt;</span> 
</span></span><span style=display:flex><span>	<span style=color:#f92672>{</span>   
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>@Query</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;select a from Customer a WHERE  a.firstName = ?&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>      List<span style=color:#f92672>&lt;</span>Customer<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>findByQuery</span><span style=color:#f92672>(</span>StringfirstName<span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>	<span style=color:#f92672>}</span>  
</span></span></code></pre></div><p>EX:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>//聲明自訂查詢
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>    *	使用JPA SQL語句
</span></span></span><span style=display:flex><span><span style=color:#75715e>    *	@return
</span></span></span><span style=display:flex><span><span style=color:#75715e>    **/</span>
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>@Query</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;select p from ProductInfoEntity p where p.productName like &#39;%米%&#39; &#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>   List<span style=color:#f92672>&lt;</span>ProductInfoEntity<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>findProductInfo</span><span style=color:#f92672>();</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>*	使用JPA SQL語句 查詢價格最高的商品
</span></span></span><span style=display:flex><span><span style=color:#75715e>**/</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Query</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;select p from ProductInfoEntity p &#34;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;where p.productPrice=&#34;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;(select max(p2.productPrice) from ProductInfoEntity p2)&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  List<span style=color:#f92672>&lt;</span>ProductInfoEntity<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>findMaxPrice</span><span style=color:#f92672>();</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span> <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>  * 使用JPA SQL語句 帶參數的查詢1
</span></span></span><span style=display:flex><span><span style=color:#75715e>  * @param name
</span></span></span><span style=display:flex><span><span style=color:#75715e>  * @param price
</span></span></span><span style=display:flex><span><span style=color:#75715e>  * @return
</span></span></span><span style=display:flex><span><span style=color:#75715e>  **/</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Query</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;select o from ProductInfoEntity o where o.productName=?1 and o.productPrice=?2&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  List<span style=color:#f92672>&lt;</span>ProductInfoEntity<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>findParam</span><span style=color:#f92672>(</span>String name<span style=color:#f92672>,</span> <span style=color:#66d9ef>double</span> price<span style=color:#f92672>);</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span>  <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>   * 使用JPASQL語句 帶參數的查詢2
</span></span></span><span style=display:flex><span><span style=color:#75715e>   * @param name
</span></span></span><span style=display:flex><span><span style=color:#75715e>   * @param price
</span></span></span><span style=display:flex><span><span style=color:#75715e>   * @return
</span></span></span><span style=display:flex><span><span style=color:#75715e>   **/</span>
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>@Query</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;select o from ProductInfoEntity o where o.productName=:name and o.productPrice=:price&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   List<span style=color:#f92672>&lt;</span>ProductInfoEntity<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>findParam2</span><span style=color:#f92672>(</span><span style=color:#a6e22e>@Param</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;name&#34;</span><span style=color:#f92672>)</span> String name<span style=color:#f92672>,</span> <span style=color:#a6e22e>@Param</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;price&#34;</span><span style=color:#f92672>)</span> <span style=color:#66d9ef>double</span> price<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>當然還可以使用原生</span>SQL<span style=color:#960050;background-color:#1e0010>語句進行查詢</span><span style=color:#f92672>,</span><span style=color:#960050;background-color:#1e0010>只需要</span> nativeQuery <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span> <span style=color:#960050;background-color:#1e0010>即可</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span> <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>  *使用原生SQL語句 查詢
</span></span></span><span style=display:flex><span><span style=color:#75715e>  * @return
</span></span></span><span style=display:flex><span><span style=color:#75715e>  **/</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Query</span><span style=color:#f92672>(</span>nativeQuery <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>,</span>value <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;select count(*) from product_info&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  Integer <span style=color:#a6e22e>getCount</span><span style=color:#f92672>();</span>
</span></span></code></pre></div><p><strong>Spring data JPA</strong> 更新及刪除操作整合事物的使用</p><p>更新操作注意事項:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span> <span style=color:#75715e>/** 使用Query注解寫更新JPA語句
</span></span></span><span style=display:flex><span><span style=color:#75715e> *添加 @Modifying 注解
</span></span></span><span style=display:flex><span><span style=color:#75715e> **/</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>@Modifying</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Query</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;update ProductInfoEntity o set o.productPrice =:price where o.productId=:id&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  Integer <span style=color:#a6e22e>updatePrice</span><span style=color:#f92672>(</span><span style=color:#a6e22e>@Param</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;id&#34;</span><span style=color:#f92672>)</span> String id<span style=color:#f92672>,</span><span style=color:#a6e22e>@Param</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;price&#34;</span><span style=color:#f92672>)</span> <span style=color:#66d9ef>double</span> price<span style=color:#f92672>);</span>
</span></span></code></pre></div><ul><li>在service層添加事物 @Transactional</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> com.itguang.weixinsell.service<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> com.itguang.weixinsell.repository.ProductInfoRepository<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.beans.factory.annotation.Autowired<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.stereotype.Service<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.transaction.annotation.Transactional<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Service</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Transactional</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ProductInfoService</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>@Autowired</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>private</span> ProductInfoRepository infoRepository<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>public</span> Integer <span style=color:#a6e22e>updatePrice</span><span style=color:#f92672>(</span> String id<span style=color:#f92672>,</span><span style=color:#66d9ef>double</span> price<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  Integer i <span style=color:#f92672>=</span> infoRepository<span style=color:#f92672>.</span><span style=color:#a6e22e>updatePrice</span><span style=color:#f92672>(</span>id<span style=color:#f92672>,</span> price<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>return</span> i<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h2 id=參考>參考</h2><p><a href=https://spring.io/projects/spring-data title="Spring Data" rel="noopener external nofollow noreferrer" target=_blank class=exturl>Spring Data
<i class="fa fa-external-link-alt"></i></a></p><p><a href=https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#reference title="Spring Data JPA - Reference Documentation" rel="noopener external nofollow noreferrer" target=_blank class=exturl>Spring Data JPA - Reference Documentation
<i class="fa fa-external-link-alt"></i></a></p><p><a href=http://www.spring4all.com/article/500 title="Spring For All 社区 Spring Data JPA 从入门到进阶系列教程 | Spring For All (spring4all.com)" rel="noopener external nofollow noreferrer" target=_blank class=exturl>Spring For All 社区 Spring Data JPA 从入门到进阶系列教程 | Spring For All (spring4all.com)
<i class="fa fa-external-link-alt"></i></a></p></div><footer class=post-footer><div class=post-tags><a href=/tags/java>java</a>
<a href=/tags/spring>Spring</a>
<a href=/tags/spring-data-jpa>Spring Data JPA</a></div><div class=addthis_inline_share_toolbox style=text-align:center></div><hr><div class=reward-container><div><i class="fa-solid fa-mug-hot"></i>请我喝杯咖啡吧 ヾ(^▽^*)))</div><div class=post-reward><div class=post-reward-item><img src=/blog/imgs/img-lazy-loading.gif data-src=/imgs/ali-pay.png alt="NexT 主题 - 支付寶">
<span>支付寶</span></div><div class=post-reward-item><img src=/blog/imgs/img-lazy-loading.gif data-src=/imgs/wechat-pay.png alt="NexT 主题 - 微信">
<span>微信</span></div></div></div><div class=post-copyright><img src=/blog/imgs/cc/cc.svg width=75 height=75 align=right><ul><li class=post-copyright-title><strong>文章標題：</strong>
SpringDataJpaNotes</li><li class=post-copyright-author><strong>本文作者：</strong>
NexT 主题</li><li class=post-copyright-link><strong>本文鏈接：</strong>
<a id=post-cr-link href=https://iankingh.github.io/blog/post/spring/spring-data-jpa-notes/ title=SpringDataJpaNotes>https://iankingh.github.io/blog/post/spring/spring-data-jpa-notes/</a></li><li class=post-copyright-license><strong>版權聲明：</strong>
本站所有文章除特別聲明外，均採用 <i class="fab fa-fw fa-creative-commons"></i><a target=_blank href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh>BY-NC-SA</a> 許可協議。轉載請註明出處！</li></ul></div><div id=disqus_thread></div><script type=text/javascript>(function(){var t,e=document.createElement("script");e.type="text/javascript",e.async=!0,t="https-iankingh-github-io",e.src="//"+t+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)})()</script><noscript>Please enable JavaScript to view the
<a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=http://disqus.com/ class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></footer></article></div></div></main><footer class=footer><div class=footer-inner><div id=gtranslate class=google-translate><i class="fa fa-language"></i><div id=google_translate_element></div></div><div class=copyright>&copy;
<span itemprop=copyrightYear>2010 - 2023</span>
<span class=with-love><i class="fa fa-heart"></i></span>
<span class=author itemprop=copyrightHolder>NexT 主题</span></div><div class=powered-by>由 <a href=https://gohugo.io title=0.109.0 target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next title=4.4.1 target=_blank>Hugo NexT.Gemini</a> 強力驅動</div></div></footer><script type=text/javascript src=https://cdn.staticfile.org/animejs/3.2.1/anime.min.js defer></script>
<script type=text/javascript src=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.js defer></script>
<script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#222","enable":true,"save":"manual"},"busuanzi":{"pageview":true},"copybtn":true,"darkmode":false,"giscus":{"cfg":{"category":"Comments","categoryid":null,"emit":false,"inputposition":"top","mapping":"title","reactions":false,"repo":"username/repo-name","repoid":null,"theme":"preferred_color_scheme"},"js":"https://giscus.app/client.js"},"hostname":"https://iankingh.github.io/blog/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小時前","ds_hours":" 小時 ","ds_just":"剛剛","ds_min":" 分鐘前","ds_mins":" 分鐘","ds_month":" 個月前","ds_years":" 年 ","empty":"沒有找到任何搜索結果：${query}","hits":"","hits_time":"找到 ${hits} 個搜索結果（用時 ${time} 毫秒）","placeholder":"搜索..."},"lang":"zh-TW","lazyload":false,"localSearch":{"enable":true,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"root":"/","scheme":"Gemini","sidebar":{"display":"post","offset":12,"padding":18,"position":"left","width":256},"statis":{"enable":true,"plugin":"busuanzi"},"vendor":{"plugins":"qiniu","router":"https://cdn.staticfile.org"},"version":"4.4.1","waline":{"cfg":{"comment":true,"emoji":false,"imguploader":false,"pageview":true,"placeholder":"请文明发言哟 ヾ(≧▽≦*)o","reaction":true,"reactiontext":["点赞","踩一下","得意","不屑","尴尬","睡觉"],"reactiontitle":"你认为这篇文章怎么样？","requiredmeta":["nick","mail"],"serverurl":null,"sofa":"快来发表你的意见吧 (≧∀≦)ゞ","wordlimit":200},"css":{"alias":"waline","file":"dist/waline.css","name":"@waline/client","version":"2.13.0"},"js":{"alias":"waline","file":"dist/waline.js","name":"@waline/client","version":"2.13.0"}}}</script><script type=text/javascript src=/blog/js/main.min.63938bd3b8224b34d4923b164da6be3911bfe7496b8d8106e8dc9afbd8676049.js defer></script></body></html>